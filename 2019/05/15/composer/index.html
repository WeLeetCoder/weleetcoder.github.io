<!-- build time:Thu May 16 2019 00:51:47 GMT+0800 (China Standard Time) --><!DOCTYPE HTML><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="keywords" content="composer, HTML,CSS,Vue,JavaScript,Go,Python,IT"><meta name="description" content="Composer 安装php -r &#34;copy(&#39;https://getcomposer.org/installer&#39;, &#39;composer-setup.php&#39;);&#34;
php -r &#34;if (hash_file(&#39;sha384&#39;, &#39;co"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>composer | Azure sky</title><link rel="icon" type="image/png" href="/favicon.png"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/materialize/1.0.0-rc.2/css/materialize.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/aos/2.3.4/aos.css"><link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/lightgallery/1.6.11/css/lightgallery.min.css"><link rel="stylesheet" type="text/css" href="/css/matery.css"><link rel="stylesheet" type="text/css" href="/css/my.css"><style type="text/css"></style><script src="https://www.aliyun.com/zixun/assets/js/jquery-3.2.1.min.js"></script><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">Azure sky</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a><ul class="right"><li class="hide-on-med-and-down"><a href="/" class="waves-effect waves-light"><i class="fa fa-home"></i> <span>首页</span></a></li><li class="hide-on-med-and-down"><a href="/tags" class="waves-effect waves-light"><i class="fa fa-tags"></i> <span>标签</span></a></li><li class="hide-on-med-and-down"><a href="/categories" class="waves-effect waves-light"><i class="fa fa-bookmark"></i> <span>分类</span></a></li><li class="hide-on-med-and-down"><a href="/archives" class="waves-effect waves-light"><i class="fa fa-archive"></i> <span>归档</span></a></li><li class="hide-on-med-and-down"><a href="/about" class="waves-effect waves-light"><i class="fa fa-user-circle-o"></i> <span>关于</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fa fa-search" title="搜索"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">Azure sky</div><div class="logo-desc">人要学会走路，也要学会摔跤，而且只有学会摔跤，他才能学会走路。—— [德]马克思</div></div><ul class="menu-list mobile-menu-list"><li><a href="/" class="waves-effect waves-light"><i class="fa fa-fw fa-home"></i> 首页</a></li><li><a href="/tags" class="waves-effect waves-light"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li><a href="/categories" class="waves-effect waves-light"><i class="fa fa-fw fa-bookmark"></i> 分类</a></li><li><a href="/archives" class="waves-effect waves-light"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li><a href="/about" class="waves-effect waves-light"><i class="fa fa-fw fa-user-circle-o"></i> 关于</a></li></ul></div></div></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/medias/featureimages/8.jpg)"><div class="container"><div class="row"><div class="col s12 m12 l12"><div class="brand"><div class="description center-align post-title">composer</div></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px}#toc-content .is-active-link{color:#42b983}#toc-content .is-active-link::before{background-color:#42b983}#floating-toc-btn{position:fixed;right:20px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><span class="chip bg-color">无标签</span></div></div><div class="col s5 right-align"></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp; 2019-05-15</div><div class="info-break-policy"><i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp; 6 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><h2 id="Composer-安装"><a href="#Composer-安装" class="headerlink" title="Composer 安装"></a>Composer 安装</h2><pre class="language-bash"><code class="language-bash">php -r <span class="token string">"copy('https://getcomposer.org/installer', 'composer-setup.php');"</span>
php -r <span class="token string">"if (hash_file('sha384', 'composer-setup.php') === '48e3236262b34d30969dca3c37281b3b4bbe3221bda826ac6a9a62d6444cdb0dcd0615698a5cbe587c3f0fe57a54d8f5') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"</span>
php composer-setup.php
php -r <span class="token string">"unlink('composer-setup.php');"</span>
</code></pre><p>官网安装教程，直接复制过来就好了，其实就是下载个 composer.phar 文件而已，搞得那么麻烦。</p><p><a href="https://getcomposer.org/download/" target="_blank" rel="noopener">https://getcomposer.org/download/</a> 或者通过这个页面直接下载，下载完成之后，如果是 like unix 系统的话，将文件移动到任意一个在 <code>$PATH</code> 目录下改名为 <code>composer</code> 就可以直接运行了，如果是 window 的话，也可以这样做，不过，需要新建一个 <code>composer.cmd</code> 文件，将如下代码写入：</p><pre><code>@echo off
php &quot;%~dp0composer.phar&quot; %*
</code></pre><p>这个就是个批处理语句，用 php 去执行当前目录下的 composer.phar 文件。</p><h3 id="composer-使用"><a href="#composer-使用" class="headerlink" title="composer 使用"></a>composer 使用</h3><p>新建一个目录名叫 <code>learn</code> ，在目录下新建一个 <code>composer.json</code> 文件：</p><h5 id="composer-json"><a href="#composer-json" class="headerlink" title="composer.json"></a>composer.json</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"require"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"mustache/mustache"</span><span class="token operator">:</span> <span class="token string">"2.9.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>然后在命令行中执行：</p><pre class="language-bash"><code class="language-bash">$ composer <span class="token function">install</span>
</code></pre><p>composer 会帮我们在项目文件夹下新建 <code>vendor</code> 目录，然后将我们需要用到的包安装到这个目录：</p><pre><code>.
|-- composer.json
|-- composer.lock
`-- vendor
    |-- autoload.php
    |-- composer
    `-- mustache
</code></pre><p>composer 会在<code>vendor</code> 目录下自动的新建 <code>autoload.php</code> 文件，我们只要将这个文件引入到我们的项目中，就能够使用我们用<code>composer</code>安装的包了，然后在目录下新建一个 <code>index.php</code> ，在其中写入如下代码：</p><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">require</span> <span class="token string">'./vendor/autoload.php'</span><span class="token punctuation">;</span>

<span class="token variable">$engine</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mustache_Engine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$engine</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'Hello {{name}}'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'name'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'zhongqi'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>然后执行这个 php 文件，可以看到输出为：</p><pre><code>$ php .\index.php
Hello zhongqi
</code></pre><p>可见，我们并没有在其中引入与 <code>Mustache_Engine</code> 相关的文件，php 却没有报错还成功了，说明自动加载机制成功运行了。</p><p>所以，使用 composer 让我们的开发更方便，我们只需要在 <code>composer.json</code> 文件中定义我们需要的依赖，然后执行 <code>composer install</code> 就可以安装了，安装完成之后，引入 <code>vendor</code> 目录下的 <code>autoload.php</code> 就可以直接使用我们用 composer 安装的依赖包了，非常的方便。</p><h4 id="composer-json-中的版本号管理"><a href="#composer-json-中的版本号管理" class="headerlink" title="composer.json 中的版本号管理"></a>composer.json 中的版本号管理</h4><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"require"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"mustache/mustache"</span><span class="token operator">:</span> <span class="token string">"~2.9.0"</span> // 注意：版本号前面的符号
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><ul><li><p><code>~</code></p><p>例1: <code>~2.8.1</code> 也就是从 2.8.1 ~ 2. 9.0</p><p>例2：<code>~2.8</code> 也就是 2.8.0 ~ 2.9.0</p></li><li><p><code>^</code> 从当前版本号到</p><p>例1： <code>^0.8</code> 也即是 0.8 ~ 0.9 之间</p><p>例2: <code>~2.7.0</code> 也就是 2.7.0 ~ 2.8.0</p></li></ul><p>有关于版本号约束表达式的更多信息可以看<a href="https://qq52o.me/2427.html" target="_blank" rel="noopener">这里</a> or <a href="https://getcomposer.org/doc/articles/versions.md" target="_blank" rel="noopener">这里</a>，大佬们写的非常好也非常详细。</p><h4 id="如何查找我们需要的包"><a href="#如何查找我们需要的包" class="headerlink" title="如何查找我们需要的包"></a>如何查找我们需要的包</h4><p>我们可以从这个<a href="https://packagist.org/" target="_blank" rel="noopener">网站</a>查找我们需要的包。</p><h4 id="包安装"><a href="#包安装" class="headerlink" title="包安装"></a>包安装</h4><pre class="language-bash"><code class="language-bash">$ composer require mustache/mustache
Using version ^2.12 <span class="token keyword">for</span> mustache/mustache
./composer.json has been updated
Loading composer repositories with package information
Updating dependencies <span class="token punctuation">(</span>including require-dev<span class="token punctuation">)</span>
Package operations: 0 installs, 1 update, 0 removals
  - Updating mustache/mustache <span class="token punctuation">(</span>v2.9.0 <span class="token operator">=</span><span class="token operator">></span> v2.12.0<span class="token punctuation">)</span>: Downloading <span class="token punctuation">(</span>100%<span class="token punctuation">)</span>
Writing lock <span class="token function">file</span>
Generating autoload files
</code></pre><p>我们可以使用这个代码来安装上面的那个包，先在 <code>composer.json</code> 中，将require中的依赖先删除，然后执行命令，默认的我们安装的是最新版本，如果需要指定版本的话可以这样：</p><pre class="language-bash"><code class="language-bash">$ composer require mustache/mustache:2.9.0
$ composer require mustache/mustache<span class="token operator">=</span>2.9.0
$ composer require mustache/mustache 2.9.0
</code></pre><p>这三种方式都可以</p><h4 id="解析-composer-json-与-composer-lock"><a href="#解析-composer-json-与-composer-lock" class="headerlink" title="解析 composer.json 与 composer.lock"></a>解析 composer.json 与 composer.lock</h4><p>composer.lock 会将我们的项目内使用的包版本锁定（composer.lock 中的依赖包的版本是确定的，而不是 composer.json 中的可以指定范围的），以防我们不小心修改了 composer.json 中的版本号，导致项目依赖不兼容，如果我们的确是需要更新的话我们可以先在composer.json 中更新我们的依赖的版本号，然后再使用：</p><pre class="language-bash"><code class="language-bash">$ composer update
</code></pre><p>这样，composer 会先读取 composer.json 然后将版本号更新到 composer.lock 中去。</p><h4 id="composer-自动加载"><a href="#composer-自动加载" class="headerlink" title="composer 自动加载"></a>composer 自动加载</h4><p>这个就是我们需要加载的 composer 的 <code>autoload.php</code> 文件了，很简单对吧。</p><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>

<span class="token comment" spellcheck="true">// autoload.php @generated by Composer</span>

<span class="token keyword">require_once</span> <span class="token constant">__DIR__</span> <span class="token punctuation">.</span> <span class="token string">'/composer/autoload_real.php'</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> ComposerAutoloaderInit7378ca3608f29097dc99ca7b7883510d<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>调用 getLoader 方法，会注册我们所有安装了的包，然后再我们使用到了的时候就会自动的帮我们引入进来。</p><pre class="language-php"><code class="language-php">spl_autoload_register
</code></pre><p>上面这个方法是自动加载的关键。</p><h4 id="查看composer-安装的包的信息"><a href="#查看composer-安装的包的信息" class="headerlink" title="查看composer 安装的包的信息"></a>查看composer 安装的包的信息</h4><pre><code>composer show &lt;包名&gt;
</code></pre><pre><code>$ composer show mustache/mustache
name     : mustache/mustache
descrip. : A Mustache implementation in PHP.
keywords : mustache, templating
versions : * v2.9.0
type     : library
license  : MIT License (MIT) (OSI approved) https://spdx.org/licenses/MIT.html#licenseText
source   : [git] https://github.com/bobthecow/mustache.php.git c745b01956caf27d26b55a72a90aff56bc169cd6
dist     : [zip] https://api.github.com/repos/bobthecow/mustache.php/zipball/c745b01956caf27d26b55a72a90aff56bc169cd6 c745b01956caf27d26b55a72a90aff56bc169cd6
path     : C:\Users\ZAKI\Code\php\learn\vendor\mustache\mustache
names    : mustache/mustache
...
</code></pre><h4 id="composer-中的-require-dev-属性"><a href="#composer-中的-require-dev-属性" class="headerlink" title="composer 中的 require-dev 属性"></a>composer 中的 require-dev 属性</h4><p>也就是只有开发才需要的包，就放入这里，一些生产环境需要的包一般是放在<code>require</code> 属性中的，在生产环境中的时候我们可以使用：</p><pre><code>$ composer install --no-dev
</code></pre><p>composer 就会帮我们安装 require 中的依赖，而不安装 require-dev 中的依赖。</p><h4 id="composer-在项目中使用自动加载"><a href="#composer-在项目中使用自动加载" class="headerlink" title="composer 在项目中使用自动加载"></a>composer 在项目中使用自动加载</h4><p>在composer.json中配置 autoload ，使用psr-4 标准，然后定义一个，命名空间，键名是命名空间的名字，值是文件夹名。</p><h5 id="composer-json-1"><a href="#composer-json-1" class="headerlink" title="composer.json"></a>composer.json</h5><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>

  <span class="token property">"autoload"</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token property">"psr-4"</span><span class="token operator">:</span> <span class="token punctuation">{</span>

      <span class="token property">"Azure\\"</span><span class="token operator">:</span> <span class="token string">"src/"</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><p>上面这个例子中，</p><p>当前的项目文件夹：</p><pre><code>|-- composer.json
|-- index.php
|-- src
`-- vendor
</code></pre><p>比如：</p><pre><code>.
|-- composer.json
|-- index.php
|-- src
|   `-- Test.php
`-- vendor
    |-- autoload.php
    `-- composer
</code></pre><h5 id="Test-php"><a href="#Test-php" class="headerlink" title="Test.php"></a>Test.php</h5><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">Azure</span>；
  <span class="token keyword">class</span> <span class="token class-name">Test</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string">"hello, I phper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><h5 id="index-php"><a href="#index-php" class="headerlink" title="index.php"></a>index.php</h5><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">require</span> <span class="token string">'./vendor/autoload.php'</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Azure<span class="token punctuation">\</span>Test</span><span class="token punctuation">;</span>

<span class="token variable">$test</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>这样就会自动加载成功了，composer.json 的配置就是上面的那个。</p><blockquote><p>注意，自动加载机制，命名空间需要对应文件夹名，然后类名需要和文件名保持一致，才能够自动加载成功。</p><p>并且文件中的命名空间也要保持一致，否则会无法自动加载类。</p></blockquote><p>比如说</p><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">require</span> <span class="token string">'./vendor/autoload.php'</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Azure<span class="token punctuation">\</span>Test</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 表示在 src 目录下的 Test.php 中的 Test 的类，类名和文件名需要保持一致，否则无法加载。</span>

<span class="token variable">$test</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">namespace</span> <span class="token package">Azure</span>； 
  <span class="token keyword">class</span> <span class="token class-name">Test</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token string">"hello, I phper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><p>文件在哪个命名空间就写那个文件夹的命名空间，比如说 src 目录 映射到的命名空间是 Azure ，所以在 src 目录下的文件的命名空间都是 <code>namespace Azure</code> 就可以了，自动加载的时候可以这样：</p><pre class="language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span>
<span class="token keyword">use</span> <span class="token package">Azure<span class="token punctuation">\</span></span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filename</span><span class="token punctuation">></span></span></span><span class="token punctuation">;</span> 
</code></pre><p>就可以自动加载成功了，前提是，指定文件内的类名和文件名，以及命名空间都没有错误的话。</p></div><hr><link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div></div><script src="/libs/share/js/social-share.min.js"></script><div class="reprint"><p><span class="reprint-tip"><i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明: </span><a href="https://yoursite.com" class="b-link-green">Azure sky</a> <i class="fa fa-angle-right fa-lg fa-fw text-color"></i> <a href="/2019/05/15/composer/" class="b-link-green">composer</a></p></div></div></div><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6 overflow-policy" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fa fa-dot-circle-o"></i>&nbsp;本篇</div><div class="card"><a href="/2019/05/15/composer/"><div class="card-image"><img src="/medias/featureimages/8.jpg" class="responsive-img" alt="composer"> <span class="card-title">composer</span></div></a><div class="card-content article-content"><div class="summary block-with-text">Composer 安装php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');" php -r "if (hash_file('sha384', 'co</div><div class="publish-info"><span class="publish-date"><i class="fa fa-clock-o fa-fw icon-date"></i>2019-05-15 </span><span class="publish-author"><i class="fa fa-user fa-fw"></i> Qi</span></div></div></div></div><div class="article col s12 m6 overflow-policy" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fa fa-chevron-right"></i></div><div class="card"><a href="/2019/05/15/untitled/"><div class="card-image"><img src="/medias/featureimages/0.jpg" class="responsive-img" alt> <span class="card-title"></span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="fa fa-clock-o fa-fw icon-date"></i>2019-05-15 </span><span class="publish-author"><i class="fa fa-user fa-fw"></i> Qi</span></div></div></div></div></div></article></div></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fa fa-list"></i></a></div><script src="https://cdn.bootcss.com/tocbot/4.5.1/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align"><div class="col s12 m8 l8 copy-right">本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于 <a href="https://hexo.io/" target="_blank">Hexo</a> 的 <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建. &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp; <span class="white-color">27.6k</span><br><span id="busuanzi_container_site_pv"><i class="fa fa-heart-o"></i> 本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span> </span><span id="busuanzi_container_site_uv"><i class="fa fa-users"></i> 次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.</span></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/WeLeetCoder" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fa fa-github"></i> </a><a href="mailto:zq2640710087@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fa fa-envelope-open"></i> </a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2640710087" class="tooltipped" data-tooltip="QQ联系我: 2640710087" data-position="top" data-delay="50"><i class="fa fa-qq"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="/js/search.js"></script><script type="text/javascript">$(function(){searchFunc("/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fa fa-angle-up"></i></a></div><script src="https://cdn.bootcss.com/materialize/1.0.0-rc.1/js/materialize.min.js"></script><script src="https://cdn.bootcss.com/masonry/4.0.0/masonry.pkgd.min.js"></script><script src="https://cdn.bootcss.com/aos/2.3.4/aos.js"></script><script src="https://cdn.bootcss.com/scrollprogress/3.0.2/scrollProgress.min.js"></script><script src="https://cdn.bootcss.com/lightgallery/1.6.11/js/lightgallery.min.js"></script><script src="/js/matery.js"></script><script async src="/libs/others/busuanzi.pure.mini.js"></script></body></html><!-- rebuild by neat -->